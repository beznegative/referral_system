# üîê –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Google reCAPTCHA

## –ü–æ–ª—É—á–µ–Ω–∏–µ –∫–ª—é—á–µ–π reCAPTCHA

### –®–∞–≥ 1: –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –≤ Google reCAPTCHA

1. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –Ω–∞ [https://www.google.com/recaptcha/admin/create](https://www.google.com/recaptcha/admin/create)
2. –í–æ–π–¥–∏—Ç–µ –≤ —Å–≤–æ–π –∞–∫–∫–∞—É–Ω—Ç Google
3. –ù–∞–∂–º–∏—Ç–µ "–°–æ–∑–¥–∞—Ç—å" –∏–ª–∏ "+"

### –®–∞–≥ 2: –ù–∞—Å—Ç—Ä–æ–π–∫–∞ —Å–∞–π—Ç–∞

1. **–ú–µ—Ç–∫–∞ (Label):** –í–≤–µ–¥–∏—Ç–µ –Ω–∞–∑–≤–∞–Ω–∏–µ –≤–∞—à–µ–≥–æ —Å–∞–π—Ç–∞
2. **–¢–∏–ø reCAPTCHA:** –í—ã–±–µ—Ä–∏—Ç–µ **reCAPTCHA v2** ‚Üí **–ì–∞–ª–æ—á–∫–∞ "–Ø –Ω–µ —Ä–æ–±–æ—Ç"**
3. **–î–æ–º–µ–Ω—ã:** –î–æ–±–∞–≤—å—Ç–µ –≤–∞—à–∏ –¥–æ–º–µ–Ω—ã:
   ```
   example.com
   www.example.com
   localhost (–¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è)
   127.0.0.1 (–¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è)
   ```
4. **–í–ª–∞–¥–µ–ª—å—Ü—ã:** –î–æ–±–∞–≤—å—Ç–µ email –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–æ–≤
5. **–ü—Ä–∏–Ω—è—Ç—å —É—Å–ª–æ–≤–∏—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è**
6. –ù–∞–∂–º–∏—Ç–µ **–û—Ç–ø—Ä–∞–≤–∏—Ç—å**

### –®–∞–≥ 3: –ü–æ–ª—É—á–µ–Ω–∏–µ –∫–ª—é—á–µ–π

–ü–æ—Å–ª–µ —Å–æ–∑–¥–∞–Ω–∏—è –≤—ã –ø–æ–ª—É—á–∏—Ç–µ:
- **Site Key (–ö–ª—é—á —Å–∞–π—Ç–∞)** - –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –Ω–∞ —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–µ
- **Secret Key (–°–µ–∫—Ä–µ—Ç–Ω—ã–π –∫–ª—é—á)** - –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –Ω–∞ –±—ç–∫–µ–Ω–¥–µ

## –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –≤ —Å–∏—Å—Ç–µ–º–µ

### 1. –û–±–Ω–æ–≤–∏—Ç–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é

–û—Ç–∫—Ä–æ–π—Ç–µ —Ñ–∞–π–ª `captcha_config.php` –∏ –æ–±–Ω–æ–≤–∏—Ç–µ —Å–ª–µ–¥—É—é—â–∏–µ —Å—Ç—Ä–æ–∫–∏:

```php
// –ó–∞–º–µ–Ω–∏—Ç–µ –Ω–∞ –≤–∞—à–∏ —Ä–µ–∞–ª—å–Ω—ã–µ –∫–ª—é—á–∏
define('RECAPTCHA_SITE_KEY', '–≤–∞—à_site_key_–∑–¥–µ—Å—å');
define('RECAPTCHA_SECRET_KEY', '–≤–∞—à_secret_key_–∑–¥–µ—Å—å');

// –í–∫–ª—é—á–∏—Ç–µ reCAPTCHA
define('CAPTCHA_TYPE', 'recaptcha');
```

### 2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å cURL

reCAPTCHA —Ç—Ä–µ–±—É–µ—Ç cURL –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –æ–Ω —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω:

```bash
php -m | grep curl
```

–ï—Å–ª–∏ cURL –Ω–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω:
```bash
# Ubuntu/Debian
sudo apt-get install php-curl

# CentOS/RHEL
sudo yum install php-curl
```

### 3. –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

1. –û—Ç–∫—Ä–æ–π—Ç–µ `test_captcha_system.php`
2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ä–∞–∑–¥–µ–ª "–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –∫–∞–ø—á–∏"
3. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ "reCAPTCHA –≤–∫–ª—é—á–µ–Ω–∞: –î–∞"
4. –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä—É–π—Ç–µ –∫–∞–ø—á—É —á–µ—Ä–µ–∑ `captcha.php?target=miniapp`

## –¢–µ—Å—Ç–æ–≤—ã–µ –∫–ª—é—á–∏ Google

–î–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ç–µ—Å—Ç–æ–≤—ã–µ –∫–ª—é—á–∏ Google:

```php
// –¢–µ—Å—Ç–æ–≤—ã–µ –∫–ª—é—á–∏ (–≤—Å–µ–≥–¥–∞ –ø—Ä–æ—Ö–æ–¥—è—Ç –ø—Ä–æ–≤–µ—Ä–∫—É)
define('RECAPTCHA_SITE_KEY', '6LeIxAcTAAAAAJcZVRqyHh71UMIEGNQ_MXjiZKhI');
define('RECAPTCHA_SECRET_KEY', '6LeIxAcTAAAAAGG-vFI1TnRWxMZNFuojJ4WifJWe');
```

‚ö†Ô∏è **–í–Ω–∏–º–∞–Ω–∏–µ:** –¢–µ—Å—Ç–æ–≤—ã–µ –∫–ª—é—á–∏ —Ä–∞–±–æ—Ç–∞—é—Ç —Ç–æ–ª—å–∫–æ –≤ –ª–æ–∫–∞–ª—å–Ω–æ–π —Å—Ä–µ–¥–µ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏!

## –ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –º–µ–∂–¥—É —Ç–∏–ø–∞–º–∏ –∫–∞–ø—á–∏

–í —Ñ–∞–π–ª–µ `captcha_config.php` –∏–∑–º–µ–Ω–∏—Ç–µ:

```php
// –î–ª—è –ø—Ä–æ—Å—Ç–æ–π –∫–∞–ø—á–∏
define('CAPTCHA_TYPE', 'simple');

// –î–ª—è Google reCAPTCHA
define('CAPTCHA_TYPE', 'recaptcha');
```

## –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –¥–æ–º–µ–Ω–æ–≤

### –î–ª—è –ø—Ä–æ–¥–∞–∫—à–µ–Ω–∞:
```
yourdomain.com
www.yourdomain.com
```

### –î–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏:
```
localhost
127.0.0.1
your-dev-domain.com
```

### –î–ª—è Telegram Mini Apps:
–ï—Å–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç–µ Telegram Web Apps, –¥–æ–±–∞–≤—å—Ç–µ:
```
web.telegram.org
```

## –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

### –ó–∞—â–∏—Ç–∞ –∫–ª—é—á–µ–π

1. **–ù–∏–∫–æ–≥–¥–∞ –Ω–µ –ø—É–±–ª–∏–∫—É–π—Ç–µ Secret Key –≤ –ø—É–±–ª–∏—á–Ω–æ–º –∫–æ–¥–µ**
2. **–•—Ä–∞–Ω–∏—Ç–µ –∫–ª—é—á–∏ –≤ –æ—Ç–¥–µ–ª—å–Ω–æ–º –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–æ–Ω–Ω–æ–º —Ñ–∞–π–ª–µ:**

```php
// config.local.php (–¥–æ–±–∞–≤—å—Ç–µ –≤ .gitignore)
<?php
define('RECAPTCHA_SITE_KEY', '–≤–∞—à_—Ä–µ–∞–ª—å–Ω—ã–π_site_key');
define('RECAPTCHA_SECRET_KEY', '–≤–∞—à_—Ä–µ–∞–ª—å–Ω—ã–π_secret_key');
?>
```

3. **–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è:**
```php
define('RECAPTCHA_SITE_KEY', $_ENV['RECAPTCHA_SITE_KEY'] ?? 'fallback_key');
define('RECAPTCHA_SECRET_KEY', $_ENV['RECAPTCHA_SECRET_KEY'] ?? 'fallback_key');
```

### –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–æ–º–µ–Ω–∞

reCAPTCHA –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç –¥–æ–º–µ–Ω. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –≤–∞—à –¥–æ–º–µ–Ω –¥–æ–±–∞–≤–ª–µ–Ω –≤ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ reCAPTCHA.

## –£—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ –Ω–µ–ø–æ–ª–∞–¥–æ–∫

### –û—à–∏–±–∫–∏ reCAPTCHA

| –ö–æ–¥ –æ—à–∏–±–∫–∏ | –û–ø–∏—Å–∞–Ω–∏–µ | –†–µ—à–µ–Ω–∏–µ |
|------------|----------|---------|
| `missing-input-secret` | –û—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç Secret Key | –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é |
| `invalid-input-secret` | –ù–µ–≤–µ—Ä–Ω—ã–π Secret Key | –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∫–ª—é—á –≤ Google Console |
| `missing-input-response` | –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–µ –ø—Ä–æ—à–µ–ª reCAPTCHA | –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –∫–∞–ø—á–∞ –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è |
| `invalid-input-response` | –ù–µ–≤–µ—Ä–Ω—ã–π —Ç–æ–∫–µ–Ω | –¢–æ–∫–µ–Ω –º–æ–≥ –∏—Å—Ç–µ—á—å, –æ–±–Ω–æ–≤–∏—Ç–µ —Å—Ç—Ä–∞–Ω–∏—Ü—É |
| `bad-request` | –ù–µ–≤–µ—Ä–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç –∑–∞–ø—Ä–æ—Å–∞ | –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∫–æ–¥ –æ—Ç–ø—Ä–∞–≤–∫–∏ |
| `timeout-or-duplicate` | –¢–∞–π–º-–∞—É—Ç –∏–ª–∏ –ø–æ–≤—Ç–æ—Ä–Ω–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ | –û–±–Ω–æ–≤–∏—Ç–µ —Å—Ç—Ä–∞–Ω–∏—Ü—É |

### –ù–µ –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è reCAPTCHA

1. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å Google:**
   ```bash
   ping www.google.com
   ```

2. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –±–ª–æ–∫–∏—Ä–æ–≤—â–∏–∫–∏ —Ä–µ–∫–ª–∞–º—ã** - –æ–Ω–∏ –º–æ–≥—É—Ç –±–ª–æ–∫–∏—Ä–æ–≤–∞—Ç—å reCAPTCHA

3. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ HTTPS** - reCAPTCHA –ª—É—á—à–µ —Ä–∞–±–æ—Ç–∞–µ—Ç —Å HTTPS

4. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ CSP –∑–∞–≥–æ–ª–æ–≤–∫–∏** - —É–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –æ–Ω–∏ –Ω–µ –±–ª–æ–∫–∏—Ä—É—é—Ç Google

### –õ–æ–≥–∏ –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏

–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ –≤ –ø–∞–ø–∫–µ `logs/`:
- `captcha_verifications.log` - —É—Å–ø–µ—à–Ω—ã–µ –ø—Ä–æ–≤–µ—Ä–∫–∏
- `captcha_errors.log` - –æ—à–∏–±–∫–∏ –ø—Ä–æ–≤–µ—Ä–∫–∏

## –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥

### –í Google reCAPTCHA Admin Console

1. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ [https://www.google.com/recaptcha/admin](https://www.google.com/recaptcha/admin)
2. –í—ã–±–µ—Ä–∏—Ç–µ –≤–∞—à —Å–∞–π—Ç
3. –ü—Ä–æ—Å–º–∞—Ç—Ä–∏–≤–∞–π—Ç–µ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É:
   - –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –∑–∞–ø—Ä–æ—Å–æ–≤
   - –ü—Ä–æ—Ü–µ–Ω—Ç —É—Å–ø–µ—à–Ω—ã—Ö –ø—Ä–æ–≤–µ—Ä–æ–∫
   - –ü–æ–¥–æ–∑—Ä–∏—Ç–µ–ª—å–Ω–∞—è –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å

### –í —Å–∏—Å—Ç–µ–º–µ

–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ `test_captcha_system.php` –¥–ª—è –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞:
- –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –∫–∞–ø—á–∏
- –°—Ç–∞—Ç—É—Å —Å–µ—Å—Å–∏–∏
- –õ–æ–≥–∏ –ø—Ä–æ–≤–µ—Ä–æ–∫

---

## –ë—ã—Å—Ç—Ä—ã–π —á–µ–∫–ª–∏—Å—Ç

- [ ] –ü–æ–ª—É—á–∏–ª –∫–ª—é—á–∏ –æ—Ç Google reCAPTCHA
- [ ] –û–±–Ω–æ–≤–∏–ª `captcha_config.php`
- [ ] –£—Å—Ç–∞–Ω–æ–≤–∏–ª `CAPTCHA_TYPE = 'recaptcha'`
- [ ] –î–æ–±–∞–≤–∏–ª –¥–æ–º–µ–Ω—ã –≤ Google Console
- [ ] –ü—Ä–æ–≤–µ—Ä–∏–ª —Ä–∞–±–æ—Ç—É cURL
- [ ] –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–ª —á–µ—Ä–µ–∑ `test_captcha_system.php`
- [ ] –î–æ–±–∞–≤–∏–ª —Ä–µ–∞–ª—å–Ω—ã–µ –∫–ª—é—á–∏ –≤ .gitignore
- [ ] –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–ª –Ω–∞ –ø—Ä–æ–¥–∞–∫—à–µ–Ω–µ

–ì–æ—Ç–æ–≤–æ! üéâ 